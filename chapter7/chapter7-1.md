# **7-1. 정규 표현식 살펴보기**

정규 표현식은 복잡한 문자열을 처리할 때 사용하는 기법으로, 간단히 정규식이라고 부르기도 한다.

## **정규 표현식은 왜 필요한가?**

다음과 같은 문제를 고려해보자.

> 주민등록번호를 포함하고 있는 텍스트가 있다. 이 텍스트에 포함된 모든 주민등록번호의 뒷자리를 * 문자로 변경해보자.

* 정규표현식을 사용하지 않는다면 ?<br>
  1. data를 줄 별로 나눠 반복문을 돌린다.
  2. 줄을 공백을 기준으로 나눠 반복문을 돌린다.
  3. 주민등록번호 형식을 찾으면 뒷자리를 * 문자로 변경한다.
  4. [줄] 리스트로 나누어진 것을 문자열로 합쳐준다.
  5. [data] 리스트로 나누어진 것을 문자열로 합쳐준다.
```python
data = """park 800905-1049118
kim 70905-1059119"""

total = []
for line in data.split("\n"):
    result = []
    for word in line.split(" "):
        if len(word) == 14 and word[:6].isdigit() and word[7:].isdigit():
            word = word[:6] + "-" + "*"*7
        result.append(word) 
    total.append(" ".join(result))

print("\n".join(total))
>>> park 800905-1049118
>>> kim 70905-1059119
```

* 정규표현식을 사용한다면 ?
```python
import re

data = """park 800905-1049118
kim 70905-1059119"""

p = re.compile("(\d{6})[-](\d{7})")
print(p.sub("\g<1>-*******", data))
```

re 모듈의 compile()을 이용하여 정규 표현식을 컴파일한다. 1번째 그룹 6자리 숫자, - 문자열, 7자리 숫자가 합해진 정규 표현식이다.<br> 
이 때 뒷자리를 *로 대체해야 하기 때문에 문자열을 바꾸는 sub 메서드를 이용해야 한다. sub 메서드 내에서는 `\g<그룹이름 혹은 참조번호>`를 적어주면 그룹을 참조할 수 있으므로 주민번호 앞자리인 첫 번째 그룹을 참조하고, 뒷자리는 *로 대체해준다.<br>
이렇게 정규표현식을 사용했을 때와 사용하지 않았을 때를 비교해보면 코드가 상당히 간결해진 것을 볼 수 있다. 따라서 굉장히 복잡한 규칙을 가질 경우 정규표현식이 더욱 유용하게 사용될 것이다.
